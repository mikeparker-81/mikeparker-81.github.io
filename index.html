<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta property="og:image" content="https://moglmogl.exoplanet.fyi/api/og-image" />
    <meta
      property="og:title"
      content="심심할 땐? 펀허브에서 핫딜과 웃음, 꿀정보 한방에!"
    />
    <meta
      propertay="og:description"
      content="밈·짤·유머는 기본, 핫딜부터 인기 커뮤니티 글까지! 지루할 틈 없이 쏟아지는 최신 꿀잼 소식, 지금 바로 확인하세요 😎🔥"
    />

    <title>모글모글</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #f4f4f9;
        text-align: center;
      }

      .message {
        font-size: 24px;
        color: #333;
        padding: 20px;
        border-radius: 5px;
        background-color: #ffffff;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
      }

      .message span {
        display: inline-block;
        opacity: 0;
        animation: fadeIn 2s forwards;
      }

      @keyframes fadeIn {
        0% {
          opacity: 0;
          transform: translateY(10px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .loading-text {
        font-weight: bold;
      }
    </style>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const userAgent =
          navigator.userAgent || navigator.vendor || window.opera;
        const isIOS = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;
        const isAndroid = /android/i.test(userAgent);

        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get("id") || "";
        const marketId = urlParams.get("marketId") || "";

        const iosStoreURL = "https://apps.apple.com/app/id6744699150";
        const androidStoreURL =
          "https://play.google.com/store/apps/details?id=com.exoplanets.funhub";

        // marketId가 있으면 cmd1001, 없으면 cmd1000
        const cmd = marketId ? "cmd1001" : "cmd1000";
        const param = marketId || id;

        if (isAndroid) {
          // intent 방식으로 앱 실행 (최적화)
          const intentURL = `intent://${cmd}?id=${param}#Intent;scheme=funhub;package=com.exoplanets.funhub;end`;
          window.location.href = intentURL;
        } else if (isIOS) {
          // iOS는 intent 안 되므로 fallback + 감지
          const appScheme = `funhub://${cmd}?id=${param}`;
          const start = Date.now();
          window.location.href = appScheme;

          setTimeout(() => {
            const elapsed = Date.now() - start;
            if (elapsed < 2000) {
              window.location.href = iosStoreURL;
            }
          }, 1500);
        }

        // 앱 실행 시 브라우저 백그라운드 가면 페이지 닫기 시도
        document.addEventListener("visibilitychange", function () {
          if (document.hidden) {
            setTimeout(() => {
              window.close();
            }, 500);
          }
        });
      });
    </script>
  </head>
  <body>
    <div class="message">      
      <img src="./moglmogl_qr.png" />
      <span>모글모글로 이동 중</span>
      
    </div>
  </body>
</html>
